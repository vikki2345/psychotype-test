<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Тест на психотип</title>
  <style>
    * { box-sizing: border-box; }
    body, html {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #333;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 16px;
    }
    .container {
      width: 100%;
      max-width: 600px;
      background: #fff;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }
    h1 {
      font-size: 1.6rem;
      margin-bottom: 16px;
      text-align: center;
      color: #4a4a90;
    }
    .progress-container {
      width: 100%;
      height: 12px;
      background: #ddd;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 20px;
    }
    .progress-bar {
      height: 100%;
      width: 0;
      background: linear-gradient(90deg, #667eea, #764ba2);
      transition: width 0.4s ease;
    }
    .question-number {
      font-weight: 600;
      margin-bottom: 8px;
      color: #667eea;
    }
    .question-text {
      font-size: 1.2rem;
      margin-bottom: 16px;
    }
    .answers-container {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .answer-option {
      background: #f0f4ff;
      padding: 12px;
      border-radius: 10px;
      border: 2px solid transparent;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .answer-option.selected {
      background: #667eea;
      color: #fff;
      border-color: #4a5fc1;
    }
    .btn-back {
      margin-top: 24px;
      background: #667eea;
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 1rem;
      border-radius: 24px;
      cursor: pointer;
    }
    .btn-back:disabled {
      background: #aaa;
      cursor: not-allowed;
    }
    #resultContent {
      display: none;
      text-align: center;
    }
    .score-display {
      font-size: 2rem;
      font-weight: 600;
      color: #667eea;
      margin-bottom: 12px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Тест на психотип — 15 вопросов</h1>
    <div class="progress-container"><div class="progress-bar" id="progressBar"></div></div>
    <div id="quizContent">
      <div class="question-number" id="questionNumber"></div>
      <div class="question-text" id="questionText"></div>
      <div class="answers-container" id="answersContainer"></div>
      <button id="backButton" class="btn-back" onclick="previousQuestion()">Назад</button>
    </div>
    <div id="resultContent">
      <div class="score-display" id="scoreDisplay"></div>
      <div class="redirect-message">Через 3 секунды покажу результат теста...</div>
    </div>
  </div>

  <script>
    const questions = [
  { question: "Твой друг неожиданно отменяет ВАЖНУЮ встречу. Как ты реагируешь?", answers: [
    { text: "Быстро адаптируюсь и ищу альтернативу", points: 10 },
    { text: "Чувствую раздражение, но стараюсь не показывать", points: 7 },
    { text: "Задумываюсь, почему так вышло, немного переживаю", points: 4 },
    { text: "Расстраиваюсь и долго об этом думаю", points: 1 }
  ]},
  { question: "Ты приехал в новый город и хочешь БЫСТРО сориентироваться. Что делаешь?", answers: [
    { text: "Составляю карту и планирую маршрут", points: 7 },
    { text: "Спрашиваю у местных и ориентируюсь на разговоры", points: 10 },
    { text: "Просто гуляю, надеюсь найти что-то интересное", points: 4 },
    { text: "Тревожусь, боюсь заблудиться", points: 1 }
  ]},
  { question: "Решил выучить новую тему, но ОБЪЕМ ИНФОРМАЦИИ ОЧЕНЬ БОЛЬШОЙ. Как учишь?", answers: [
    { text: "Разбиваю на части и учусь по шагам", points: 7 },
    { text: "Слушаю подкасты, обсуждаю с друзьями", points: 10 },
    { text: "Визуализирую и связываю с образами", points: 4 },
    { text: "Откладываю, сложно сосредоточиться", points: 1 }
  ]},
  { question: "После тяжелого дня вечером ты…", answers: [
    { text: "Занимаюсь спортом или гуляю, чтобы переключиться", points: 10 },
    { text: "Общаюсь с друзьями онлайн или лично", points: 7 },
    { text: "Смотрю сериал или читаю книгу в тишине", points: 4 },
    { text: "Предпочитаю побыть один и ни с кем не говорить", points: 1 }
  ]},
  { question: "Во время разговора замечаешь, что тебя не понимают. Что делаешь?", answers: [
    { text: "Анализирую и стараюсь улучшить себя", points: 7 },
    { text: "Защищаюсь и высказываю свое мнение", points: 10 },
    { text: "Обдумываю в одиночестве, чтобы понять", points: 4 },
    { text: "Злюсь и иногда опускаю руки", points: 1 }
  ]},
  { question: "Ты сталкиваешься с критикой в свой адрес. Реакция?", answers: [
    { text: "Анализирую и стараюсь улучшить себя", points: 7 },
    { text: "Защищаюсь и высказываю свое мнение", points: 10 },
    { text: "Обдумываю в одиночестве, чтобы понять", points: 4 },
    { text: "Злюсь и иногда опускаю руки", points: 1 }
  ]},
  { question: "Тебе нужно быстро переключиться с работы на отдых. Как делаешь?", answers: [
    { text: "Планирую время и четко разделяю дела", points: 7 },
    { text: "Встречаюсь с друзьями или занимаюсь хобби", points: 10 },
    { text: "Стараюсь расслабиться и медитировать", points: 4 },
    { text: "Тяжело переключаюсь, остаюсь в мыслях", points: 1 }
  ]},
  { question: "Ты решил выучить новые слова. Как лучше всего тебе?", answers: [
    { text: "Учить слова через таблицы и списки", points: 7 },
    { text: "Запоминать через повторение и разговоры", points: 10 },
    { text: "Связывать слова с образами и ситуациями", points: 4 },
    { text: "Учить в движении, через действия", points: 1 }
  ]},
  { question: "Когда ты слышишь сложное объяснение, то…", answers: [
    { text: "Переформулирую в голове проще", points: 7 },
    { text: "Спрашиваю, чтобы услышать по-другому", points: 10 },
    { text: "Визуализирую процесс или схему", points: 4 },
    { text: "Стараюсь представить, как сделать это на практике", points: 1 }
  ]},
  { question: "Тебе нужно принять быстрое решение в стрессовой ситуации. Что происходит?", answers: [
    { text: "Анализирую ситуацию и выбираю оптимальное решение", points: 7 },
    { text: "Обсуждаю с кем-то и принимаю совместно", points: 10 },
    { text: "Медлю, чтобы подумать тщательнее", points: 4 },
    { text: "Боюсь ошибиться и откладываю решение", points: 1 }
  ]},
  { question: "Ты учишься чему-то новому, и вдруг делаешь ошибку. Что делаешь?", answers: [
    { text: "Анализирую, делаю выводы и пробую снова", points: 7 },
    { text: "Спрашиваю у других совета, как исправить", points: 10 },
    { text: "Размышляю в тишине и учусь на опыте", points: 4 },
    { text: "Расстраиваюсь и боюсь продолжать", points: 1 }
  ]},
  { question: "Ты чувствуешь, что теряешь мотивацию. Что поможет?", answers: [
    { text: "Поставить конкретную цель и план", points: 7 },
    { text: "Поддержка друзей или наставника", points: 10 },
    { text: "Отдохнуть и переключиться на что-то приятное", points: 4 },
    { text: "Забросить на время, чтобы не расстраиваться", points: 1 }
  ]},
  { question: "Ты планируешь день. Как?", answers: [
    { text: "Расписываю подробно по часам", points: 7 },
    { text: "Держу общую идею, но гибок", points: 10 },
    { text: "Пишу список, но часто меняю планы", points: 4 },
    { text: "Не люблю планировать, действую спонтанно", points: 1 }
  ]},
  { question: "Когда ты чувствуешь стресс, ты…", answers: [
    { text: "Активно ищу решение проблемы", points: 7 },
    { text: "Обсуждаю с близкими, делюсь эмоциями", points: 10 },
    { text: "Уединяюсь, чтобы успокоиться", points: 4 },
    { text: "Чувствую себя подавленным и иногда отступаю", points: 1 }
  ]},
  { question: "Ты узнаёшь новую информацию. Как лучше усваивается?", answers: [
    { text: "Через структурированные заметки и списки", points: 7 },
    { text: "Через рассказы и живое общение", points: 10 },
    { text: "Через образы и ассоциации", points: 4 },
    { text: "Через практические действия и опыт", points: 1 }
  ]}
];

    const progressBar = document.getElementById('progressBar');
    const questionNumberElem = document.getElementById('questionNumber');
    const questionText = document.getElementById('questionText');
    const answersContainer = document.getElementById('answersContainer');
    const backButton = document.getElementById('backButton');
    const scoreDisplay = document.getElementById('scoreDisplay');
    const quizContent = document.getElementById('quizContent');
    const resultContent = document.getElementById('resultContent');

    let currentQuestionIndex = 0;
    let totalPoints = 0;
    let answersSelected = [];

    function renderQuestion() {
      if (currentQuestionIndex >= questions.length) {
        showResult();
        return;
      }
      const q = questions[currentQuestionIndex];
      questionNumberElem.textContent = `Вопрос ${currentQuestionIndex + 1} из ${questions.length}`;
      questionText.textContent = q.question;
      answersContainer.innerHTML = '';

      q.answers.forEach((a, i) => {
        const div = document.createElement('div');
        div.className = 'answer-option';
        div.textContent = a.text;
        div.dataset.points = a.points;
        if (answersSelected[currentQuestionIndex] === i) div.classList.add('selected');
        div.onclick = () => {
          answersSelected[currentQuestionIndex] = i;
          updateSelection();
          setTimeout(() => {
            nextQuestion();
            document.querySelector('.container').scrollIntoView({ behavior: 'smooth' });
          }, 300);
        };
        answersContainer.appendChild(div);
      });

      backButton.disabled = currentQuestionIndex === 0;
      progressBar.style.width = `${(currentQuestionIndex / questions.length) * 100}%`;
    }

    function updateSelection() {
      Array.from(answersContainer.children).forEach((el, idx) => {
        el.classList.toggle('selected', idx === answersSelected[currentQuestionIndex]);
      });
    }

    function nextQuestion() {
      if (answersSelected[currentQuestionIndex] == null) return alert('Выберите ответ');
      const selected = answersSelected[currentQuestionIndex];
      totalPoints += questions[currentQuestionIndex].answers[selected].points;
      currentQuestionIndex++;
      renderQuestion();
    }

    function previousQuestion() {
      if (currentQuestionIndex === 0) return;
      totalPoints -= questions[currentQuestionIndex - 1].answers[answersSelected[currentQuestionIndex - 1]].points;
      currentQuestionIndex--;
      renderQuestion();
    }

    function showResult() {
      quizContent.style.display = 'none';
      resultContent.style.display = 'block';
      scoreDisplay.textContent = `Ваш результат: ${totalPoints} баллов`;
      progressBar.style.width = '100%';
      setTimeout(() => {
        let url = '';
        if (totalPoints <= 44) url = 'https://teletype.in/@viktoriyagro/dhhksxol6djfckldvguj21';
        else if (totalPoints <= 74) url = 'https://teletype.in/@viktoriyagro/dsikfvmkgbksgbfc2hjndf24y';
        else if (totalPoints <= 104) url = 'https://teletype.in/@viktoriyagro/ghkf6sgbnbcks5hdh3s';
        else if (totalPoints <= 134) url = 'https://teletype.in/@viktoriyagro/kkfngujgnbssdvlodskes4gb1';
        else url = 'https://teletype.in/@viktoriyagro/ikdnvujbszsfr6cjkydjnn44';
        window.location.href = url;
      }, 3000);
    }

    renderQuestion();
  </script>
</body>
</html>
